<!-- <!DOCTYPE html>
<html>
<head>
    <title>Swift Challenge</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8cEjDh7OgQzXY1as0Qjhr5U5z6ZS6xCgFz6qiaOcKfV0Em4N4U5dm7XLzyc+X+m9ZnGItA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h1>{{ challenge.title }}</h1>
            <p>{{ challenge.description }}</p>
            <div id="editor" style="height: 300px; width: 100%;"></div>
            <button id="submit" class="btn btn-primary">Submit</button>
            <p id="result"></p>
        </div>
    </div>
</div>


<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/javascript");

    $('#submit').click(function() {
        var userCode = editor.getValue();
        var challengeInput = "{{ challenge.input_example }}";
        var expectedOutput = "{{ challenge.output_example }}";
        
        // Send userCode to the server to evaluate and compare it with the expected output
        $.ajax({
            url: '/check_solution/',
            type: 'POST',
            data: {
                'user_code': userCode,
                'input': challengeInput,
                'expected_output': expectedOutput,
                'csrfmiddlewaretoken': '{{ csrf_token }}',
            },
            success: function(response) {
                if (response.result) {
                    $('#result').text('Correct!').css('color', 'green');
                } else {
                    $('#result').text('Incorrect, please try again.').css('color', 'red');
                }
            }
        });
    });
</script>

</body>
</html> -->


<!-- <!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8cEjDh7OgQjhr5U5z6ZS6xCgFz6qiaOcKfV0Em4N4U5dm7XLzyc+X+m9ZnGItA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Code Challenge</title>
</head>
<body>
    <div class="container mt-5">
        <h1>Code Challenge</h1>
        <p>Print Hello World in Swift</p>
        <form id="codeForm" method="post">
            {% csrf_token %}
            <div class="mb-3">
                <div id="codeEditor" style="width: 100%; height: 300px;"></div>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <div id="response" class="mt-3"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script>
        const editor = ace.edit("codeEditor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/swift");
        editor.setOptions({
            fontSize: "14pt",
            enableBasicAutocompletion: true,
            enableLiveAutocompletion: true,
        });

        document.getElementById('codeForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const codeInput = editor.getValue();
            const responseDiv = document.getElementById('response');
            const response = await fetch('/submit_code/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: JSON.stringify({code: codeInput})
            });
            
            const result = await response.json();
            if (result.status === 'success') {
                responseDiv.innerHTML = `<span class="text-success">Correct! Points awarded: ${result.points}</span>`;
            } else {
                responseDiv.innerHTML = '<span class="text-danger">Incorrect! Please try again.</span>';
            }
        });
    </script>
</body>
</html> -->

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8cEjDh7OgQjhr5U5z6ZS6xCgFz6qiaOcKfV0Em4N4U5dm7XLzyc+X+m9ZnGItA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        #codeEditor {
            width: 100%;
            height: 300px;
            border: 1px solid #ccc;
        }
    </style>
    <title>Code Challenge</title>
</head>
<body>
    <div class="container mt-5">
        <h1>Code Challenge</h1>
        <p>Print Hello World in Swift</p>
        <form id="codeForm" method="post">
            {% csrf_token %}
            <div class="mb-3">
                <div id="codeEditor"></div>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <div id="response" class="mt-3"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script>
        const editor = ace.edit("codeEditor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/swift");
        editor.setOptions({
            fontSize: "14pt",
            enableBasicAutocompletion: true,
            enableLiveAutocompletion: true,
        });

        document.getElementById('codeForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const codeInput = editor.getValue();
            const responseDiv = document.getElementById('response');
            const response = await fetch('/submit_code/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: JSON.stringify({code: codeInput})
            });
            const result = await response.json();
            if (result.status === 'success') {
                responseDiv.innerHTML = `<span class="text-success">Correct! Points awarded: ${result.points}</span>`;
            } else {
                responseDiv.innerHTML = '<span class="text-danger">Incorrect! Please try again.</span>';
            }
        });
    </script>
</body>
</html>


